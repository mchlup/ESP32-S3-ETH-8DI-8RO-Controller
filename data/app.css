:root { 
  --bg:#0b0f14; 
  --card:#121823; 
  --muted:#7e8aa2; 
  --text:#e7eefc; 
  --line:#1f2a3b; 
  --ok:#2ecc71; 
  --bad:#ff5c5c;
  /* compat helpers used by some widgets/pages */
  --fg: var(--text);
  --fg2: #cfe1ff;
  --fg3: var(--muted);
}
*{ box-sizing:border-box; }
body{ margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text); }
.top{ display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:rgba(11,15,20,.92); backdrop-filter: blur(10px); }
.brand{ display:flex; gap:10px; align-items:center; }
.dot{ width:10px; height:10px; border-radius:99px; background:#444; box-shadow:0 0 0 3px rgba(255,255,255,.05); }
.title{ font-weight:700; letter-spacing:.2px; }
.sub{ font-size:12px; color:var(--muted); }
.actions{ display:flex; gap:8px; }
.btn{ background:#1a2434; color:var(--text); border:1px solid var(--line); padding:8px 10px; border-radius:10px; cursor:pointer; }
.btn:hover{ border-color:#2b3a54; }
.btn.danger{ background:#2a1620; border-color:#4a2332; }
.grid{ display:grid; gap:12px; padding:12px; grid-template-columns: repeat(12, 1fr); }
.card{ background:var(--card); border:1px solid var(--line); border-radius:16px; padding:12px; grid-column: span 6; }
@media (max-width: 950px){ .card{ grid-column: span 12; } }
h2{ margin:0 0 10px; font-size:14px; color:#cfe1ff; }
.kv{ display:grid; grid-template-columns: 120px 1fr; gap:6px 10px; align-items:center; }
.k{ font-size:12px; color:var(--muted); }
.v{ font-size:12px; }
.v.ok{ color: var(--ok); }
.v.bad{ color: var(--bad); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
.hint{ margin-top:8px; font-size:12px; color:var(--muted); }
.relays{ display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; }
@media (max-width: 520px){ .relays{ grid-template-columns: repeat(2, 1fr);} }
.tile{ border:1px solid var(--line); border-radius:14px; padding:10px; background:#0f1520; }
.tile .t{ display:flex; justify-content:space-between; align-items:flex-start; gap:10px; margin-bottom:8px; }
.tile .head{ display:flex; flex-direction:column; gap:2px; min-width:0; }
.tile .head .id{ font-size:12px; color:#cfe1ff; }
.tile .head .desc{ font-size:11px; color:var(--muted); line-height:1.2; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:180px; }
.tile .badges{ display:flex; gap:6px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
.badge.fixed{ border-color: rgba(207,225,255,.25); color:#cfe1ff; }
.badge{ font-size:11px; padding:3px 8px; border-radius:99px; border:1px solid var(--line); color:var(--muted); }
.badge.on{ border-color: rgba(46,204,113,.35); color: var(--ok); }
.badge.off{ border-color: rgba(255,92,92,.25); color: var(--bad); }
.row{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
.pill{ border:1px solid var(--line); border-radius:999px; padding:8px 10px; font-size:12px; background:#0f1520; }
.pill.na{ color: var(--muted); }
.pill.stale{ border-color: rgba(255,92,92,.25); color: var(--bad); }
.pill.fresh{ border-color: rgba(46,204,113,.35); color: var(--ok); }
.inputs, .temps{ display:grid; grid-template-columns: repeat(2, 1fr); gap:8px; }
@media (max-width: 520px){ .inputs, .temps{ grid-template-columns: 1fr; } }
.item{ border:1px solid var(--line); border-radius:14px; padding:10px; background:#0f1520; display:flex; justify-content:space-between; align-items:center; gap:10px; }
.item .label{ display:flex; flex-direction:column; gap:2px; min-width:0; }
.item .label .id{ font-size:12px; color:#cfe1ff; }
.item .label .desc{ font-size:11px; color:var(--muted); line-height:1.2; }
.item .value{ font-size:12px; color:var(--muted); }
.log{ margin:0; border:1px solid var(--line); border-radius:14px; padding:10px; background:#0f1520; font-size:11px; color:#c9d7f2; overflow:auto; max-height:260px; }


/* ---- modular dashboard shell ---- */
.shell{display:grid;grid-template-columns:280px 1fr;min-height:100vh;}
.nav{padding:16px;border-right:1px solid rgba(255,255,255,.06);background:rgba(0,0,0,.15);}
.navHeader{margin-bottom:14px;}
.navTitleRow{display:flex;align-items:center;gap:10px;}
.navTitle{font-weight:700;letter-spacing:.2px;}
.navSub{opacity:.75;font-size:12px;margin-top:4px;}
.navGroup{margin-top:14px;}
.navGroupTitle{opacity:.55;font-size:12px;margin:10px 0 8px;}
.navItem{width:100%;text-align:left;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);color:var(--fg);cursor:pointer;margin-bottom:8px;}
.navItem.isActive{background:rgba(120,180,255,.14);border-color:rgba(120,180,255,.22);}
.navFooter{margin-top:18px;opacity:.85;font-size:12px;}
.kvRow{display:flex;justify-content:space-between;gap:12px;margin:6px 0;}
.main{padding:16px;}
.topbar{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:14px;}
.h1{font-size:20px;font-weight:700;}
.pills{display:flex;gap:10px;flex-wrap:wrap;}
.pill{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);font-size:12px;}
.pageRoot{max-width:1200px;}
.grid12{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;}
.col6{grid-column:span 6;}
.col12{grid-column:span 12;}
@media(max-width:980px){.shell{grid-template-columns:1fr;}.nav{border-right:none;border-bottom:1px solid rgba(255,255,255,.06);} .col6,.col12{grid-column:span 12;}}
.layoutPanel{position:fixed;left:280px;right:0;bottom:0;top:0;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);padding:16px;}
@media(max-width:980px){.layoutPanel{left:0;}}
.layoutPanel__head{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px;}
.layoutPanel__title{font-weight:700;}
.layoutEditor{max-width:700px;}
.layoutRow{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.04);margin-bottom:10px;}
.chk{display:flex;align-items:center;gap:10px;}
.sel{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);color:var(--fg);border-radius:10px;padding:8px 10px;}
.btn.sm{padding:6px 8px;border-radius:10px;}
.rolesGrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px;}
@media(max-width:780px){.rolesGrid{grid-template-columns:1fr;}}
.roleRow{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.04);}
.roleRow .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;opacity:.8;font-size:12px;}
.small{opacity:.75;font-size:12px;}

/* ---- Tables (Thermometers page) ---- */
.tblWrap{overflow:auto;border:1px solid rgba(255,255,255,.08);border-radius:14px;background:rgba(255,255,255,.03);}
table.tbl{width:100%;border-collapse:separate;border-spacing:0;min-width:760px;}
.tbl th,.tbl td{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.06);vertical-align:top;font-size:12px;}
.tbl th{position:sticky;top:0;background:#0f1520;z-index:2;text-align:left;color:#cfe1ff;font-weight:700;}
.tbl tr:last-child td{border-bottom:none;}
.tbl .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;}
.cellStack{display:flex;flex-direction:column;gap:6px;}
.cellRow{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.tag{display:inline-flex;align-items:center;gap:6px;padding:3px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);font-size:11px;color:var(--muted);}
.tag.ok{border-color:rgba(46,204,113,.35);color:var(--ok);}
.tag.bad{border-color:rgba(255,92,92,.25);color:var(--bad);}

/* --- Ekviterm page helpers --- */
.pageHead{position:sticky;top:0;z-index:5;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0;background:var(--bg);}
.pageTitle{font-size:20px;font-weight:700}
.pageActions{display:flex;gap:10px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
@media (max-width: 980px){.grid2{grid-template-columns:1fr;}}
@media (max-width: 980px){.grid3{grid-template-columns:1fr;}}
.lbl{display:block;margin-top:10px}

/* --- Dashboard Ekviterm: mini graph + valve diagram --- */
.eqMiniCanvas{
  width:100%;
  height:auto;
  display:block;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.08);
  background:#0b0f14;
}

.eqValveBox{
  padding:10px;
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  background:rgba(255,255,255,.02);
}

.eqValveBar{
  position:relative;
  height:16px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  overflow:hidden;
  margin-top:8px;
}

.eqValveFill{
  position:absolute;
  left:0; top:0; bottom:0;
  width:0%;
  background:rgba(46,125,255,.7);
}

.eqValveMark{
  position:absolute;
  top:-6px;
  width:2px;
  height:28px;
  background:rgba(0,230,118,.95);
  box-shadow:0 0 0 2px rgba(0,0,0,.25);
}

.eqValveBar.isMoving .eqValveMark{
  animation: eqPulse 0.9s infinite ease-in-out;
}

.eqValveBar.isOpening .eqValveFill{ background: rgba(0,230,118,.35); }
.eqValveBar.isClosing .eqValveFill{ background: rgba(255,152,0,.35); }

@keyframes eqPulse{
  0%{ transform: translateX(0); opacity: .65; }
  50%{ transform: translateX(0); opacity: 1; }
  100%{ transform: translateX(0); opacity: .65; }
}

/* --- Weekly timeline (DHW schedules) --- */
.weekPlan{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.weekRow{display:grid;grid-template-columns:76px 1fr;align-items:center;gap:10px}
.weekDay{font-weight:600;color:var(--fg2);font-size:13px}
.timeBar{position:relative;height:20px;border-radius:12px;overflow:hidden;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10)}
.timeBar .tick{position:absolute;top:0;bottom:0;width:1px;background:rgba(255,255,255,.10)}
.timeBar .tickLabel{position:absolute;top:-18px;transform:translateX(-50%);font-size:11px;color:var(--fg3)}
.timeSeg{position:absolute;top:0;bottom:0;border-radius:10px;background:rgba(255,152,0,.65)}
.timeSeg.off{background:rgba(255,255,255,.08)}
.weekLegend{display:flex;gap:10px;align-items:center;margin-top:6px;color:var(--fg3);font-size:12px}
.legendSwatch{width:12px;height:12px;border-radius:4px;background:rgba(255,152,0,.65);border:1px solid rgba(255,255,255,.12)}
.weekPlanMini .timeBar{height:14px}
.weekPlanMini .weekDay{font-size:12px}
.weekPlanMini .timeBar .tickLabel{display:none}

/* Axis labels row under the last (Sunday) row */
.weekAxisRow{display:grid;grid-template-columns:76px 1fr;gap:10px;margin-top:4px}
.weekAxisRow .axisDay{opacity:0}
.weekAxisBar{position:relative;height:16px}
.weekAxisBar .axisLabel{position:absolute;top:0;transform:translateX(-50%);font-size:10px;line-height:1;color:var(--fg3);white-space:nowrap;}
.weekAxisBar .axisLabel.isStart{left:0;transform:none;font-weight:600;color:var(--fg2)}
.weekAxisBar .axisLabel.isEnd{left:100%;transform:translateX(-100%);font-weight:600;color:var(--fg2)}

/* --- Pretty tooltip bubble (hover/tap) --- */
.ttBubble{position:fixed;z-index:9999;pointer-events:none;opacity:0;transform:translateY(4px);transition:opacity .12s ease, transform .12s ease;}
.ttBubble.isOn{opacity:1;transform:translateY(0)}
.ttBubble .ttInner{max-width:260px;background:rgba(12,16,24,.96);border:1px solid rgba(255,255,255,.10);border-radius:12px;padding:8px 10px;color:var(--text);font-size:12px;box-shadow:0 8px 26px rgba(0,0,0,.35);}
.ttBubble .ttArrow{position:absolute;left:50%;transform:translateX(-50%);bottom:-6px;width:12px;height:12px;background:rgba(12,16,24,.96);border-left:1px solid rgba(255,255,255,.10);border-bottom:1px solid rgba(255,255,255,.10);transform:translateX(-50%) rotate(45deg);}

/* --- DHW config compact helpers --- */
.cfgCompact h2{margin-bottom:8px}
.cfgCompact .grid2{gap:10px}
.cfgCompact .grid3{gap:10px}
.cfgCompact .hint{margin-top:6px}
.cfgCompact .row{margin-top:8px}
