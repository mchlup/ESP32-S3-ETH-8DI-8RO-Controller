<section class="page" id="page-rules">
        <div class="grid2">
          <div class="card">
            <div class="cardHead">
              <div>
                <div class="cardTitle">Rule engine</div>
                <div class="muted">Editor pravidel + pokročilý JSON</div>
              </div>
              <div class="btnRow">
                <button class="btn ghost" id="btnAddRule">+ Pravidlo</button>
                <button class="btn ghost" id="btnFmtRules">Formátovat</button>
                <button class="btn" id="btnSaveRules">Uložit</button>
              </div>
            </div>

            <div class="rtabs" style="padding: 0 14px 10px">
              <button class="rtab active" data-rtab="editor">Editor</button>
              <button class="rtab" data-rtab="json">JSON</button>
            </div>

            <div class="tabPage active" id="rtab-editor">
              <div class="form">
                <label class="check"><input type="checkbox" id="rulesEnabled" /> Rule engine enabled</label>
                <label class="check"><input type="checkbox" id="rulesDefaultOff" /> Default OFF pro řízená relé (fallback)</label>
              </div>
              <div class="table" id="rulesTable"></div>
              <div class="note">Tip: Klikni na „Upravit“ u pravidla. Pro složitější podmínky/akce použij záložku JSON.</div>
            </div>

            <div class="tabPage" id="rtab-json">
              <textarea id="rulesJson" spellcheck="false" class="code" rows="18"></textarea>
            </div>
          </div>

          <div class="card">
            <div class="cardHead">
              <div>
                <div class="cardTitle">Stav Rule engine</div>
                <div class="muted">Runtime info (počty, enabled, …)</div>
              </div>
              <button class="btn ghost" id="btnReloadRules">Načíst</button>
            </div>
            <pre class="pre" id="rulesStatus">—</pre>
          </div>
        </div>
      </section>
